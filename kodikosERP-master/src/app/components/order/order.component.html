<!-- <app-menu></app-menu> -->
<main>
  <span *ngIf="userIsAuthenticated">
    <div id="menu">
      <mat-button-toggle-group name="fontStyle" aria-label="Font Style">
        <mat-button-toggle routerLink="/glownemenu"
          >STRONA GŁÓWNA</mat-button-toggle
        >
        <mat-button-toggle class="imhere"><b>Zamówienia</b></mat-button-toggle>
        <mat-button-toggle routerLink="/lazy/ordercreate"
          >Utwórz zamówienie</mat-button-toggle
        >
        <mat-button-toggle (click)="logout()"
          >{{ loggedInUser.name }} {{ loggedInUser.surname }}</mat-button-toggle
        >
      </mat-button-toggle-group>
    </div>
    <div class="searchClass">
      <form
        (submit)="onSearchOrder(orderSearchForm)"
        #orderSearchForm="ngForm"
        class="searchForm"
      >
        &nbsp;
        <mat-form-field class="formfiel">
          <mat-placeholder class="placclass">data</mat-placeholder>
          <input matInput type="text" name="data" [(ngModel)]="orders.data" />
        </mat-form-field>
        &nbsp;
        <mat-form-field class="formfiel">
          <mat-placeholder class="placclass">twórca zamówienia</mat-placeholder>
          <input
            matInput
            type="text"
            name="creator"
            [(ngModel)]="orders.creator"
          />
        </mat-form-field>
        &nbsp;

        <button mat-raised-button type="submit">
          Szukaj
        </button>
        <button
          mat-raised-button
          color="primary"
          type="button"
          (click)="clearForm(orderSearchForm)"
        >
          Wyczyść
        </button>
      </form>
    </div>

    <mat-paginator
      *ngIf="orders.length > 0"
      id="topPag"
      [length]="totalOrders"
      [pageSize]="ordersPerPage"
      [pageSizeOptions]="pageSizeOptions"
      (page)="onChangedPage($event)"
    >
    </mat-paginator>
    <mat-spinner *ngIf="isLoading" class="spin"></mat-spinner>

    <div class="matTableDiv" *ngIf="orders.length > 0">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
        <ng-container matColumnDef="data">
          <th mat-header-cell *matHeaderCellDef>Data</th>
          <td mat-cell *matCellDef="let element">
            {{ element.data | date: 'dd.MM.yyyy' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="creator">
          <th mat-header-cell *matHeaderCellDef>Sporządził</th>
          <td mat-cell *matCellDef="let element">{{ element.creator }}</td>
        </ng-container>

        <ng-container matColumnDef="termsOfPayment">
          <th mat-header-cell *matHeaderCellDef>Warunki płatności</th>
          <td mat-cell *matCellDef="let element">
            {{ element.termsOfPayment }}
          </td>
        </ng-container>

        <ng-container matColumnDef="deliveryType">
          <th mat-header-cell *matHeaderCellDef>Warunki dostawy</th>
          <td mat-cell *matCellDef="let element">{{ element.deliveryType }}</td>
        </ng-container>

        <ng-container matColumnDef="labelling">
          <th mat-header-cell *matHeaderCellDef>Znakowanie</th>
          <td mat-cell *matCellDef="let element">{{ element.labelling }}</td>
        </ng-container>

        <ng-container matColumnDef="packing">
          <th mat-header-cell *matHeaderCellDef>Pakowanie</th>
          <td mat-cell *matCellDef="let element">{{ element.packing }}</td>
        </ng-container>

        <ng-container matColumnDef="certificate">
          <th mat-header-cell *matHeaderCellDef>Atest</th>
          <td mat-cell *matCellDef="let element">{{ element.certificate }}</td>
        </ng-container>

        <!-- <ng-container matColumnDef="realization">
            <th mat-header-cell *matHeaderCellDef> Wykonanie </th>
            <td mat-cell *matCellDef="let element"> {{element.realization}} </td>
          </ng-container> -->

        <ng-container matColumnDef="engeneeringTolerance">
          <th mat-header-cell *matHeaderCellDef>Tolerancja wykonania</th>
          <td mat-cell *matCellDef="let element">
            {{ element.engeneeringTolerance }}
          </td>
        </ng-container>

        <ng-container matColumnDef="origin">
          <th mat-header-cell *matHeaderCellDef>Poczodzenie towaru</th>
          <td mat-cell *matCellDef="let element">{{ element.origin }}</td>
        </ng-container>

        <ng-container matColumnDef="comments">
          <th mat-header-cell *matHeaderCellDef>Uwagi</th>
          <td mat-cell *matCellDef="let element">{{ element.comments }}</td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>Akcje</th>
          <td mat-cell *matCellDef="let element">
            <mat-action-row>
              <button
                mat-button
                color="primary"
                [routerLink]="['/lazy/orderedit', element.id]"
              >
                Edytuj
              </button>
              <button mat-button color="warn" (click)="onDelete(element.id)">
                Usuń
              </button>
            </mat-action-row>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>

    <!-- <mat-paginator id="topPag" [length]="totalAssortments" [pageSize]="assortmentsPerPage"
        [pageSizeOptions]="pageSizeOptions" (page)="onChangedPage($event)" *ngIf="assortments.length > 0">
      </mat-paginator>

      <mat-paginator id="bottomPag" [length]="totalAssortments" [pageSize]="assortmentsPerPage"
        [pageSizeOptions]="pageSizeOptions" (page)="onChangedPage($event)" *ngIf="assortments.length > 0">
      </mat-paginator> -->

    <div id="carddiv" *ngIf="orders.length <= 0">
      <mat-card class=" example-card">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title>Brak Danych</mat-card-title>
          <mat-card-subtitle
            >W bazie nie ma jeszcze żadnych zamówień.</mat-card-subtitle
          >
        </mat-card-header>
        <mat-card-actions>
          <button mat-raised-button color="primary" (click)="powrot()">
            Powrót
          </button>
          <button
            mat-raised-button
            color="primary"
            routerLink="/lazy/ordercreate"
          >
            Utwórz zamówienie
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </span>

  <div id="carddiv" *ngIf="!userIsAuthenticated">
    <mat-card class="example-card">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>Nie zalogowany</mat-card-title>
        <mat-card-subtitle
          >Zaloguj się do systemu aby odczytać dane.</mat-card-subtitle
        >
      </mat-card-header>
      <mat-card-actions>
        <button mat-raised-button color="primary" routerLink="/login">
          Logowanie do systemu
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</main>
